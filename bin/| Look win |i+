#!/usr/bin/env bash

# Get unstaged files
printf "Unstaged:\n\t"
git --no-pager diff --name-status | awk '
BEGIN{modified_idx=0; added_idx=0; deleted_idx=0;}

{
	if ($1 == "M") {
		modified[sprintf("%d", modified_idx)]=$2; modified_idx+=1;
	} else if ($1 == "A") {
		added[sprintf("%d", added_idx)]=$2; added_idx+=1;
	} else if ($1 == "D") {
		deleted[sprintf("%d", deleted_idx)]=$2; deleted_idx+=1;
	}
}

END {
	print "Modified:";
	for (m in modified) {
		printf("\t%s\n", modified[m]);
	};
	print "";
	print "Added:";
	for (a in added) {
		printf("\t%s\n", added[a]);
	};
	print "";
	print "Deleted:";
	for (d in deleted) {
		printf("\t%s\n", deleted[d]);
	};

}'