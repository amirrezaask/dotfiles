#!/usr/bin/bash
# searches for every symbol in your source code, symbol types can be f , sc , i , v

filename=`echo $samfile`

extension=`echo "${filename##*.}"`
if [ -z "$2" ]; then
	query_type='a'
else
	query_type="$2"
fi

# Add more languages :)

if [ $extension == 'go' ]; then
	f="func $1"
	sc="type $1 struct"
	i="type $1 interface"
	v="(var $1)|($1\s*:=)"
fi


#echo $f
#echo $sc
#echo $i
#echo $v
cmd="rg --vimgrep"
if [ $query_type == "f" ] || [ $query_type == "a" ]; then
	cmd+=" -e '$f'"
fi

if [ $query_type == "sc" ] || [ $query_type == "a" ]; then
	cmd+=" -e '$sc'"
fi

if [ $query_type == "i" ] || [ $query_type == "a" ]; then
	cmd+=" -e '$i'"
fi

if [ $query_type == "v" ] || [ $query_type == "a" ]; then
	cmd+=" -e '$v'"
fi
#echo $cmd
eval $cmd